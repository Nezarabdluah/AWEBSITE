<div class="institute-detail-page">
    <!-- Breadcrumb -->
    <div class="container">
        <app-breadcrumb [items]="breadcrumbs"></app-breadcrumb>
    </div>

    <!-- Loading State -->
    @if (loading()) {
    <div class="container">
        <div class="loading-state">
            <app-loading-spinner [size]="'large'"></app-loading-spinner>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù‡Ø¯...</p>
        </div>
    </div>
    }

    <!-- Error State -->
    @else if (error()) {
    <div class="container">
        <div class="error-state">
            <p class="error-message">{{ error() }}</p>
            <a routerLink="/institutes" class="btn btn-primary">
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
            </a>
        </div>
    </div>
    }

    <!-- Institute Details -->
    @else if (institute(); as inst) {
    <!-- Hero Section -->
    <div class="institute-hero">
        <div class="institute-hero__image">
            <img [src]="inst.image" [alt]="inst.name">
            <div class="institute-hero__overlay"></div>
        </div>
        <div class="container institute-hero__content">
            <div class="institute-hero__info">
                <div class="type-badge">{{ getTypeLabel(inst.type) }}</div>
                <h1 class="institute-name">{{ inst.name }}</h1>
                @if (inst.name_en) {
                <p class="institute-name-en">{{ inst.name_en }}</p>
                }
                <div class="institute-meta">
                    <span class="meta-item">ğŸ“ {{ inst.city }}, {{ inst.country }}</span>
                    @if (inst.rating) {
                    <span class="meta-item rating">â­ {{ inst.rating }}</span>
                    }
                </div>
            </div>
            <div class="institute-hero__actions">
                <button class="btn btn-primary btn-lg" (click)="applyNow()">
                    Ù‚Ø¯Ù‘Ù… Ø§Ù„Ø¢Ù†
                </button>
                <a [href]="inst.website" target="_blank" class="btn btn-outline btn-lg">
                    ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="institute-content">
            <!-- Quick Stats -->
            <div class="quick-stats">
                @if (inst.students_count) {
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ formatNumber(inst.students_count) }}</div>
                        <div class="stat-label">Ø·Ø§Ù„Ø¨</div>
                    </div>
                </div>
                }

                @if (inst.programs_count) {
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ formatNumber(inst.programs_count) }}</div>
                        <div class="stat-label">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø±Ø§Ø³ÙŠ</div>
                    </div>
                </div>
                }

                @if (inst.rating) {
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ inst.rating }}</div>
                        <div class="stat-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
                    </div>
                </div>
                }
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab" [class.tab--active]="activeTab() === 'overview'" (click)="setActiveTab('overview')">
                    Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'programs'" (click)="setActiveTab('programs')">
                    Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'admission'"
                    (click)="setActiveTab('admission')">
                    Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ø´Ø±ÙˆØ·
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'contact'" (click)="setActiveTab('contact')">
                    Ø§Ù„ØªÙˆØ§ØµÙ„
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Overview Tab -->
                @if (activeTab() === 'overview') {
                <div class="tab-pane">
                    <h2>Ø¹Ù† {{ inst.name }}</h2>
                    @if (inst.description) {
                    <p class="description">{{ inst.description }}</p>
                    } @else {
                    <p class="description">
                        {{ inst.name }} Ù…Ù† Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø© Ø§Ù„ØªÙŠ ØªÙ‚Ø¯Ù… Ø¨Ø±Ø§Ù…Ø¬ Ø¯Ø±Ø§Ø³ÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©.
                    </p>
                    }
                </div>
                }

                <!-- Programs Tab -->
                @if (activeTab() === 'programs') {
                <div class="tab-pane">
                    <h2>Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
                    <p class="description">
                        ÙŠÙ‚Ø¯Ù… {{ inst.name }} {{ formatNumber(inst.programs_count) }} Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø±Ø§Ø³ÙŠ Ù…ØªÙ†ÙˆØ¹.
                    </p>
                    <!-- TODO: Add programs list -->
                </div>
                }

                <!-- Admission Tab -->
                @if (activeTab() === 'admission') {
                <div class="tab-pane">
                    <h2>Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ø´Ø±ÙˆØ·</h2>
                    <div class="admission-info">
                        <div class="info-card">
                            <h3>Ø´Ø±ÙˆØ· Ø§Ù„Ù‚Ø¨ÙˆÙ„</h3>
                            <p>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø´Ø±ÙˆØ· Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ù‚Ø±ÙŠØ¨Ø§Ù‹.</p>
                        </div>
                    </div>
                </div>
                }

                <!-- Contact Tab -->
                @if (activeTab() === 'contact') {
                <div class="tab-pane">
                    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h2>

                    <div class="contact-info">
                        @if (inst.website) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸŒ</span>
                            <div>
                                <strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
                                <a [href]="inst.website" target="_blank" rel="noopener">{{ inst.website }}</a>
                            </div>
                        </div>
                        }

                        @if (inst.email) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“§</span>
                            <div>
                                <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
                                <a [href]="'mailto:' + inst.email">{{ inst.email }}</a>
                            </div>
                        </div>
                        }

                        @if (inst.phone) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“</span>
                            <div>
                                <strong>Ø§Ù„Ù‡Ø§ØªÙ</strong>
                                <a [href]="'tel:' + inst.phone">{{ inst.phone }}</a>
                            </div>
                        </div>
                        }

                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“</span>
                            <div>
                                <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</strong>
                                <p>{{ inst.city }}, {{ inst.country }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>