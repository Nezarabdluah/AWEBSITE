<div class="institute-list-page">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">ุงููุนุงูุฏ ูุงููููุงุช</h1>
            <p class="page-subtitle">ุงุณุชูุดู ุฃูุถู ุงููุนุงูุฏ ูุงููููุงุช ุงูุชุนููููุฉ</p>
        </div>

        <!-- Filters Bar -->
        <div class="filters-bar">
            <div class="filters-bar__search">
                <input type="text" class="search-input" placeholder="ุงุจุญุซ ุนู ูุนูุฏ ุฃู ูููุฉ..." [value]="searchQuery()"
                    (input)="onSearch($any($event.target).value)">
                <span class="search-icon">๐</span>
            </div>

            <div class="filters-bar__controls">
                <select class="filter-select" [value]="selectedType() || ''"
                    (change)="onTypeChange($any($event.target).value)">
                    <option value="">ุฌููุน ุงูุฃููุงุน</option>
                    @for (type of instituteTypes; track type.value) {
                    <option [value]="type.value">{{ type.label }}</option>
                    }
                </select>

                <select class="filter-select" [value]="filters.sort_by"
                    (change)="onSortChange($any($event.target).value)">
                    <option value="name">ุงูุงุณู</option>
                    <option value="students_count">ุนุฏุฏ ุงูุทูุงุจ</option>
                    <option value="programs_count">ุนุฏุฏ ุงูุจุฑุงูุฌ</option>
                    <option value="rating">ุงูุชูููู</option>
                </select>

                @if (selectedType() || searchQuery()) {
                <button class="btn btn-sm btn-outline" (click)="clearFilters()">
                    ูุณุญ ุงูููุงุชุฑ
                </button>
                }
            </div>
        </div>

        <!-- Results Count -->
        <div class="results-info">
            <p>ุนุฑุถ {{ institutes().length }} ูู ุฃุตู {{ total() }} ูุนูุฏ</p>
        </div>

        <!-- Loading State -->
        @if (loading()) {
        <div class="loading-state">
            <app-loading-spinner [size]="'large'"></app-loading-spinner>
            <p>ุฌุงุฑู ุชุญููู ุงููุนุงูุฏ...</p>
        </div>
        }

        <!-- Error State -->
        @else if (error()) {
        <div class="error-state">
            <p class="error-message">{{ error() }}</p>
            <button class="btn btn-primary" (click)="loadInstitutes()">
                ุฅุนุงุฏุฉ ุงููุญุงููุฉ
            </button>
        </div>
        }

        <!-- Institutes Grid -->
        @else if (institutes().length > 0) {
        <div class="institutes-grid">
            @for (institute of institutes(); track institute.id) {
            <app-institute-card [institute]="institute" [showActions]="true" (viewDetails)="onViewDetails($event)">
            </app-institute-card>
            }
        </div>

        <!-- Pagination -->
        @if (totalPages() > 1) {
        <div class="pagination-wrapper">
            <app-pagination [currentPage]="currentPage()" [totalPages]="totalPages()"
                (pageChange)="onPageChange($event)">
            </app-pagination>
        </div>
        }
        }

        <!-- Empty State -->
        @else {
        <div class="empty-state">
            <div class="empty-icon">๐ซ</div>
            <h3>ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
            <p>ูู ูุฌุฏ ุฃู ูุนุงูุฏ ุชุทุงุจู ุงูุจุญุซ. ุฌุฑุจ ุชุบููุฑ ุงูููุงุชุฑ.</p>
            <button class="btn btn-primary" (click)="clearFilters()">
                ูุณุญ ุงูููุงุชุฑ
            </button>
        </div>
        }
    </div>
</div>