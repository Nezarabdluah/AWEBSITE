<div class="university-list-page">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">ุงูุฌุงูุนุงุช ุงูุนุงูููุฉ</h1>
            <p class="page-subtitle">ุงูุชุดู ุฃูุถู ุงูุฌุงูุนุงุช ุญูู ุงูุนุงูู</p>
        </div>

        <!-- Filters Bar -->
        <div class="filters-bar">
            <div class="filters-bar__search">
                <input type="text" class="search-input" placeholder="ุงุจุญุซ ุนู ุฌุงูุนุฉ..." [value]="searchQuery()"
                    (input)="onSearch($any($event.target).value)">
                <span class="search-icon">๐</span>
            </div>

            <div class="filters-bar__controls">
                <select class="filter-select" [value]="selectedCountry() || ''"
                    (change)="onCountryChange($any($event.target).value)">
                    <option value="">ุฌููุน ุงูุฏูู</option>
                    @for (country of countries(); track country) {
                    <option [value]="country">{{ country }}</option>
                    }
                </select>

                <select class="filter-select" [value]="filters.sort_by"
                    (change)="onSortChange($any($event.target).value)">
                    <option value="ranking_world">ุงูุชุฑุชูุจ ุงูุนุงููู</option>
                    <option value="name">ุงูุงุณู</option>
                    <option value="students_count">ุนุฏุฏ ุงูุทูุงุจ</option>
                    <option value="tuition_fee_min">ุงูุฑุณูู</option>
                </select>

                @if (selectedCountry() || searchQuery()) {
                <button class="btn btn-sm btn-outline" (click)="clearFilters()">
                    ูุณุญ ุงูููุงุชุฑ
                </button>
                }
            </div>
        </div>

        <!-- Results Count -->
        <div class="results-info">
            <p>ุนุฑุถ {{ universities().length }} ูู ุฃุตู {{ total() }} ุฌุงูุนุฉ</p>
        </div>

        <!-- Loading State -->
        @if (loading()) {
        <div class="loading-state">
            <app-loading-spinner [size]="'large'"></app-loading-spinner>
            <p>ุฌุงุฑู ุชุญููู ุงูุฌุงูุนุงุช...</p>
        </div>
        }

        <!-- Error State -->
        @else if (error()) {
        <div class="error-state">
            <p class="error-message">{{ error() }}</p>
            <button class="btn btn-primary" (click)="loadUniversities()">
                ุฅุนุงุฏุฉ ุงููุญุงููุฉ
            </button>
        </div>
        }

        <!-- Universities Grid -->
        @else if (universities().length > 0) {
        <div class="universities-grid">
            @for (university of universities(); track university.id) {
            <app-university-card [university]="university" (viewDetails)="onViewDetails($event)"
                (addToFavorites)="onAddToFavorites($event)">
            </app-university-card>
            }
        </div>

        <!-- Pagination -->
        @if (totalPages() > 1) {
        <div class="pagination-wrapper">
            <app-pagination [currentPage]="currentPage()" [totalPages]="totalPages()"
                (pageChange)="onPageChange($event)">
            </app-pagination>
        </div>
        }
        }

        <!-- Empty State -->
        @else {
        <div class="empty-state">
            <div class="empty-icon">๐</div>
            <h3>ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
            <p>ูู ูุฌุฏ ุฃู ุฌุงูุนุงุช ุชุทุงุจู ุงูุจุญุซ. ุฌุฑุจ ุชุบููุฑ ุงูููุงุชุฑ.</p>
            <button class="btn btn-primary" (click)="clearFilters()">
                ูุณุญ ุงูููุงุชุฑ
            </button>
        </div>
        }
    </div>
</div>