<div class="university-detail-page">
    <!-- Breadcrumb -->
    <div class="container">
        <app-breadcrumb [items]="breadcrumbs"></app-breadcrumb>
    </div>

    <!-- Loading State -->
    @if (loading()) {
    <div class="container">
        <div class="loading-state">
            <app-loading-spinner [size]="'large'"></app-loading-spinner>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©...</p>
        </div>
    </div>
    }

    <!-- Error State -->
    @else if (error()) {
    <div class="container">
        <div class="error-state">
            <p class="error-message">{{ error() }}</p>
            <a routerLink="/universities" class="btn btn-primary">
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
            </a>
        </div>
    </div>
    }

    <!-- University Details -->
    @else if (university(); as uni) {
    <!-- Hero Section -->
    <div class="university-hero">
        <div class="university-hero__image">
            <img [src]="uni.image" [alt]="uni.name">
            <div class="university-hero__overlay"></div>
        </div>
        <div class="container university-hero__content">
            <div class="university-hero__info">
                @if (uni.logo) {
                <img [src]="uni.logo" [alt]="uni.name" class="university-logo">
                }
                <div>
                    <h1 class="university-name">{{ uni.name }}</h1>
                    @if (uni.name_en) {
                    <p class="university-name-en">{{ uni.name_en }}</p>
                    }
                    <div class="university-meta">
                        <span class="meta-item">ğŸ“ {{ uni.city }}, {{ uni.country }}</span>
                        @if (uni.founded_year) {
                        <span class="meta-item">ğŸ“… ØªØ£Ø³Ø³Øª {{ uni.founded_year }}</span>
                        }
                        @if (uni.ranking_world) {
                        <span class="meta-item ranking">ğŸ† #{{ uni.ranking_world }} Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹</span>
                        }
                    </div>
                </div>
            </div>
            <div class="university-hero__actions">
                <button class="btn btn-primary btn-lg" (click)="applyNow()">
                    Ù‚Ø¯Ù‘Ù… Ø§Ù„Ø¢Ù†
                </button>
                <button class="btn btn-outline btn-lg" (click)="addToFavorites()">
                    â™¥ Ø­ÙØ¸
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="university-content">
            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ formatNumber(uni.students_count) }}</div>
                        <div class="stat-label">Ø·Ø§Ù„Ø¨</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘¨â€ğŸ«</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ formatNumber(uni.faculty_count) }}</div>
                        <div class="stat-label">Ø¹Ø¶Ùˆ Ù‡ÙŠØ¦Ø© ØªØ¯Ø±ÙŠØ³</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ formatNumber(uni.programs_count) }}</div>
                        <div class="stat-label">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø±Ø§Ø³ÙŠ</div>
                    </div>
                </div>
                @if (uni.rating) {
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-content">
                        <div class="stat-value">{{ uni.rating }}</div>
                        <div class="stat-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
                    </div>
                </div>
                }
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab" [class.tab--active]="activeTab() === 'overview'" (click)="setActiveTab('overview')">
                    Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'programs'" (click)="setActiveTab('programs')">
                    Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'admission'"
                    (click)="setActiveTab('admission')">
                    Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ø±Ø³ÙˆÙ…
                </button>
                <button class="tab" [class.tab--active]="activeTab() === 'contact'" (click)="setActiveTab('contact')">
                    Ø§Ù„ØªÙˆØ§ØµÙ„
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Overview Tab -->
                @if (activeTab() === 'overview') {
                <div class="tab-pane">
                    <h2>Ø¹Ù† Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</h2>
                    @if (uni.description) {
                    <p class="description">{{ uni.description }}</p>
                    }

                    @if (uni.accreditation) {
                    <div class="info-section">
                        <h3>Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ</h3>
                        <p>{{ uni.accreditation }}</p>
                    </div>
                    }
                </div>
                }

                <!-- Programs Tab -->
                @if (activeTab() === 'programs') {
                <div class="tab-pane">
                    <h2>Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
                    <p class="description">
                        ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© {{ formatNumber(uni.programs_count) }} Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø±Ø§Ø³ÙŠ ÙÙŠ Ù…Ø®ØªÙ„Ù Ø§Ù„ØªØ®ØµØµØ§Øª.
                    </p>
                    <!-- TODO: Add programs list -->
                </div>
                }

                <!-- Admission Tab -->
                @if (activeTab() === 'admission') {
                <div class="tab-pane">
                    <h2>Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ø±Ø³ÙˆÙ…</h2>

                    <div class="admission-info">
                        @if (uni.tuition_fee_min) {
                        <div class="info-card">
                            <h3>Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ø§Ù„Ø³Ù†ÙˆÙŠØ©</h3>
                            <p class="fee-amount">
                                {{ formatCurrency(uni.tuition_fee_min) }}
                                @if (uni.tuition_fee_max && uni.tuition_fee_max !== uni.tuition_fee_min) {
                                - {{ formatCurrency(uni.tuition_fee_max) }}
                                }
                            </p>
                        </div>
                        }

                        @if (uni.application_fee) {
                        <div class="info-card">
                            <h3>Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</h3>
                            <p class="fee-amount">{{ formatCurrency(uni.application_fee) }}</p>
                        </div>
                        }

                        @if (uni.acceptance_rate) {
                        <div class="info-card">
                            <h3>Ù†Ø³Ø¨Ø© Ø§Ù„Ù‚Ø¨ÙˆÙ„</h3>
                            <p class="fee-amount">{{ uni.acceptance_rate }}%</p>
                        </div>
                        }
                    </div>
                </div>
                }

                <!-- Contact Tab -->
                @if (activeTab() === 'contact') {
                <div class="tab-pane">
                    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h2>

                    <div class="contact-info">
                        @if (uni.website) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸŒ</span>
                            <div>
                                <strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
                                <a [href]="uni.website" target="_blank" rel="noopener">{{ uni.website }}</a>
                            </div>
                        </div>
                        }

                        @if (uni.email) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“§</span>
                            <div>
                                <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
                                <a [href]="'mailto:' + uni.email">{{ uni.email }}</a>
                            </div>
                        </div>
                        }

                        @if (uni.phone) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“</span>
                            <div>
                                <strong>Ø§Ù„Ù‡Ø§ØªÙ</strong>
                                <a [href]="'tel:' + uni.phone">{{ uni.phone }}</a>
                            </div>
                        </div>
                        }

                        @if (uni.address) {
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“</span>
                            <div>
                                <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</strong>
                                <p>{{ uni.address }}</p>
                            </div>
                        </div>
                        }
                    </div>
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>